# Streambake #

## Todo ##
- Make a list of "actions" that modules can add/register "hooks" to/for,
  similar to how Dancer handles different URLs
- Will there be a priority between the same hook that is implemented in two
  different modules?

## Project Requirements ##
- Stream MP3/FLAC files from a computer to an `Icecast` server
- Search for songs/artists
- Take requests for songs
- Allow for skipping through the current songs
- Manage request queues
- Manage user permissions
- Manage lists of songs
  - Accept lists of songs generated by external programs (`find`)

## Project Features ##
- HTTP front end
  - Accepts API requests from clients (iOS/watchOS/tvOS/Android), relays them
    to the server via a local socket
  - Authenticates clients, either through a user database, or SSL certs
    - How to use multiple SSL certs with different webservers?
    - SSL client cert + password?
    - How to get the SSL cert to clients (iOS/Android/CLI)?
  - Use Mojolicious for the server side, and JSON for API requests from
    clients
  - Authenticate each API request like Amazon does for AWS commands, checksum
    the command plus the credentials, and the server can also check checksum and
    credentials to verify the command from the client
- Dedicated "server" backend
  - Read files from the local filesystem and push them to `Icecast/Shoutcast`
    via `libshout`
  - Update `Icecast` server metadata
  - Finds/keeps track of album art images, so clients can request them for
    viewing on the client
  - Will dynamically build the _Shout_ module as needed, as long as `libshout`
    is installed on the host, and there's a compiler available
    - Will rebuild the _Shout_ module during any upgrades of the server
      backend
    - Will work on Windows
- CLI client
  - Makes requests against HTTP API using localhost socket, or proxied across
    a web server
- iOS/watchOS/tvOS Clients
  - Levarage the same "guts" across all clients, only changing the "View"
    class that shows the interface
    - What options would be supported on which clients?
      - Album art
      - Skipping songs
      - Requesting songs
- Song playing features
  - "Chaining songs" - when a specific song is selected, play a 2nd (related)
    song after it
    - If the chained (2nd or subsequent) song comes up in a song queue, then
      the songs that the track is chained to should be played first
       - Chelovek and koshka + plus the accordion intro song
       - Pink Floyd Dark Side of the Moon tracks
       - ELO - Eldorado Overture + Can't Get It Out Of My Head
  - A "dead space" flag for tracks
    - A track marked as having "dead space" has silence as part of the song
    - "Dead space" songs should have the option to skip over the dead space,
      if desired
      - The Black Keys - The Big Come Up - 240 Years Before Your Time
      - Kyuss - And The Circus Left Town - Spaceship Landing

## Misc Notes ##
- Preflight script/app
  - Libraries or binaries that are missing from the system and are required by
    `Streambake` can be output to the user in a message, along with
    suggestions on which packages should be installed in order to satisfy
    dependencies
- Link the databases between Streambake and Album Collection, so only one copy
  of the same data is stored
- Store album art in the same folder as the music files, use the suffixes
  -front/.front and -back/.back if more than one image is in the folder so you
  can tell which image to display during song/album playback
- Automagically search for album art
  - Look in the same directory as the file that is streaming
  - Look in a common directory, using Artist_Name-Album_Name as the template
    for filenames
- Use HTML5 <audio> tags for adding streaming MP3's to a webpage?

vim: filetype=markdown tabstop=2
